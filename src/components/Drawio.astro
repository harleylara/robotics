---
import fs from 'node:fs/promises';
import { XMLParser } from 'fast-xml-parser';

const {file} = Astro.props;

const url = new URL(`../resources/${file}`, import.meta.url);
const xmlFile = await fs.readFile(url, 'utf-8');

const parser = new XMLParser();
const diagram = parser.parse(xmlFile).mxfile.diagram;

const src = `https://viewer.diagrams.net/?tags=%7B%7D&highlight=0000ff&edit=_blank&layers=1&nav=1&title=test.drawio#R${encodeURIComponent(diagram)}`
console.log("HERE:" + encodeURIComponent(diagram));

---
<div>
    <iframe frameborder="0" style="width:100%;height:200px;" src={src}></iframe>-->
</div>
